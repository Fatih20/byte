/* Database.c generated by valac 0.40.12, the Vala compiler
 * generated from Database.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <sqlite3.h>
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <gtk/gtk.h>
#include <gee.h>


#define SERVICES_TYPE_DATABASE (services_database_get_type ())
#define SERVICES_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SERVICES_TYPE_DATABASE, ServicesDatabase))
#define SERVICES_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SERVICES_TYPE_DATABASE, ServicesDatabaseClass))
#define SERVICES_IS_DATABASE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SERVICES_TYPE_DATABASE))
#define SERVICES_IS_DATABASE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SERVICES_TYPE_DATABASE))
#define SERVICES_DATABASE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SERVICES_TYPE_DATABASE, ServicesDatabaseClass))

typedef struct _ServicesDatabase ServicesDatabase;
typedef struct _ServicesDatabaseClass ServicesDatabaseClass;
typedef struct _ServicesDatabasePrivate ServicesDatabasePrivate;
enum  {
	SERVICES_DATABASE_0_PROPERTY,
	SERVICES_DATABASE_NUM_PROPERTIES
};
static GParamSpec* services_database_properties[SERVICES_DATABASE_NUM_PROPERTIES];
#define _sqlite3_close0(var) ((var == NULL) ? NULL : (var = (sqlite3_close (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define SERVICES_TYPE_SIGNALS (services_signals_get_type ())
#define SERVICES_SIGNALS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SERVICES_TYPE_SIGNALS, ServicesSignals))
#define SERVICES_SIGNALS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SERVICES_TYPE_SIGNALS, ServicesSignalsClass))
#define SERVICES_IS_SIGNALS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SERVICES_TYPE_SIGNALS))
#define SERVICES_IS_SIGNALS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SERVICES_TYPE_SIGNALS))
#define SERVICES_SIGNALS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SERVICES_TYPE_SIGNALS, ServicesSignalsClass))

typedef struct _ServicesSignals ServicesSignals;
typedef struct _ServicesSignalsClass ServicesSignalsClass;

#define OBJECTS_TYPE_TRACK (objects_track_get_type ())
#define OBJECTS_TRACK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), OBJECTS_TYPE_TRACK, ObjectsTrack))
#define OBJECTS_TRACK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), OBJECTS_TYPE_TRACK, ObjectsTrackClass))
#define OBJECTS_IS_TRACK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), OBJECTS_TYPE_TRACK))
#define OBJECTS_IS_TRACK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), OBJECTS_TYPE_TRACK))
#define OBJECTS_TRACK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), OBJECTS_TYPE_TRACK, ObjectsTrackClass))

typedef struct _ObjectsTrack ObjectsTrack;
typedef struct _ObjectsTrackClass ObjectsTrackClass;
#define _sqlite3_finalize0(var) ((var == NULL) ? NULL : (var = (sqlite3_finalize (var), NULL)))
typedef struct _ObjectsTrackPrivate ObjectsTrackPrivate;
#define _objects_track_unref0(var) ((var == NULL) ? NULL : (var = (objects_track_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _ServicesDatabase {
	GObject parent_instance;
	ServicesDatabasePrivate * priv;
};

struct _ServicesDatabaseClass {
	GObjectClass parent_class;
};

struct _ServicesDatabasePrivate {
	sqlite3* db;
	gchar* db_path;
};

struct _ObjectsTrack {
	GTypeInstance parent_instance;
	volatile int ref_count;
	ObjectsTrackPrivate * priv;
	gint id;
	gchar* path;
	gchar* title;
	gchar* artist;
	gchar* genre;
	gchar* album;
	guint64 duration;
};

struct _ObjectsTrackClass {
	GTypeClass parent_class;
	void (*finalize) (ObjectsTrack *self);
};


static gpointer services_database_parent_class = NULL;
extern ServicesSignals* application_signals;

GType services_database_get_type (void) G_GNUC_CONST;
#define SERVICES_DATABASE_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SERVICES_TYPE_DATABASE, ServicesDatabasePrivate))
ServicesDatabase* services_database_new (gboolean skip_tables);
ServicesDatabase* services_database_construct (GType object_type,
                                               gboolean skip_tables);
static gint services_database_create_tables (ServicesDatabase* self);
GType services_signals_get_type (void) G_GNUC_CONST;
gpointer objects_track_ref (gpointer instance);
void objects_track_unref (gpointer instance);
GParamSpec* objects_param_spec_track (const gchar* name,
                                      const gchar* nick,
                                      const gchar* blurb,
                                      GType object_type,
                                      GParamFlags flags);
void objects_value_set_track (GValue* value,
                              gpointer v_object);
void objects_value_take_track (GValue* value,
                               gpointer v_object);
gpointer objects_value_get_track (const GValue* value);
GType objects_track_get_type (void) G_GNUC_CONST;
void services_database_add_track (ServicesDatabase* self,
                                  ObjectsTrack* track);
static void _services_database_add_track_services_signals_discovered_new_item (ServicesSignals* _sender,
                                                                        ObjectsTrack* track,
                                                                        gpointer self);
gboolean services_database_music_file_exists (ServicesDatabase* self,
                                              const gchar* uri);
GeeArrayList* services_database_get_all_tracks (ServicesDatabase* self);
ObjectsTrack* objects_track_new (gint id,
                                 const gchar* path,
                                 const gchar* title,
                                 const gchar* artist,
                                 const gchar* genre,
                                 const gchar* album,
                                 guint64 duration);
ObjectsTrack* objects_track_construct (GType object_type,
                                       gint id,
                                       const gchar* path,
                                       const gchar* title,
                                       const gchar* artist,
                                       const gchar* genre,
                                       const gchar* album,
                                       guint64 duration);
static void services_database_finalize (GObject * obj);


static void
_services_database_add_track_services_signals_discovered_new_item (ServicesSignals* _sender,
                                                                   ObjectsTrack* track,
                                                                   gpointer self)
{
#line 23 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	services_database_add_track ((ServicesDatabase*) self, track);
#line 152 "Database.c"
}


ServicesDatabase*
services_database_construct (GType object_type,
                             gboolean skip_tables)
{
	ServicesDatabase * self = NULL;
	gint rc = 0;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp6_;
	sqlite3* _tmp7_ = NULL;
	gint _tmp8_;
	gint _tmp9_;
	ServicesSignals* _tmp14_;
#line 5 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	self = (ServicesDatabase*) g_object_new (object_type, NULL);
#line 6 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	rc = 0;
#line 7 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp0_ = g_get_home_dir ();
#line 7 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp1_ = g_strconcat (_tmp0_, "/.cache/com.github.alainm23.byte/database.db", NULL);
#line 7 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_g_free0 (self->priv->db_path);
#line 7 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	self->priv->db_path = _tmp1_;
#line 9 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	if (!skip_tables) {
#line 10 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		if (services_database_create_tables (self) != SQLITE_OK) {
#line 185 "Database.c"
			FILE* _tmp2_;
			gint _tmp3_;
			sqlite3* _tmp4_;
			const gchar* _tmp5_;
#line 11 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			_tmp2_ = stderr;
#line 11 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			_tmp3_ = rc;
#line 11 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			_tmp4_ = self->priv->db;
#line 11 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			_tmp5_ = sqlite3_errmsg (_tmp4_);
#line 11 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			fprintf (_tmp2_, "Error creating db table: %d, %s\n", _tmp3_, _tmp5_);
#line 12 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			gtk_main_quit ();
#line 202 "Database.c"
		}
	}
#line 16 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp6_ = self->priv->db_path;
#line 16 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp8_ = sqlite3_open (_tmp6_, &_tmp7_);
#line 16 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_close0 (self->priv->db);
#line 16 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	self->priv->db = _tmp7_;
#line 16 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	rc = _tmp8_;
#line 18 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp9_ = rc;
#line 18 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	if (_tmp9_ != SQLITE_OK) {
#line 219 "Database.c"
		FILE* _tmp10_;
		gint _tmp11_;
		sqlite3* _tmp12_;
		const gchar* _tmp13_;
#line 19 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp10_ = stderr;
#line 19 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp11_ = rc;
#line 19 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp12_ = self->priv->db;
#line 19 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp13_ = sqlite3_errmsg (_tmp12_);
#line 19 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		fprintf (_tmp10_, "Can't open database: %d, %s\n", _tmp11_, _tmp13_);
#line 20 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		gtk_main_quit ();
#line 236 "Database.c"
	}
#line 23 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp14_ = application_signals;
#line 23 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_signal_connect_object (_tmp14_, "discovered-new-item", (GCallback) _services_database_add_track_services_signals_discovered_new_item, self, 0);
#line 5 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	return self;
#line 244 "Database.c"
}


ServicesDatabase*
services_database_new (gboolean skip_tables)
{
#line 5 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	return services_database_construct (SERVICES_TYPE_DATABASE, skip_tables);
#line 253 "Database.c"
}


static gint
_sqlite3_exec (sqlite3* self,
               const gchar* sql,
               sqlite3_callback callback,
               gpointer callback_target,
               gchar* * errmsg)
{
	gchar* _vala_errmsg = NULL;
	gint result = 0;
	const gchar* sqlite_errmsg = NULL;
	gint ec = 0;
	const gchar* _tmp0_ = NULL;
	gint _tmp1_;
	const gchar* _tmp4_;
#line 34 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 34 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	g_return_val_if_fail (sql != NULL, 0);
#line 36 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	_tmp1_ = sqlite3_exec (self, sql, callback, callback_target, (char**) (&_tmp0_));
#line 36 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	sqlite_errmsg = _tmp0_;
#line 36 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	ec = _tmp1_;
#line 37 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	if ((&_vala_errmsg) != NULL) {
#line 283 "Database.c"
		const gchar* _tmp2_;
		gchar* _tmp3_;
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_tmp2_ = sqlite_errmsg;
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_tmp3_ = g_strdup (_tmp2_);
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_g_free0 (_vala_errmsg);
#line 38 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_vala_errmsg = _tmp3_;
#line 294 "Database.c"
	}
#line 40 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	_tmp4_ = sqlite_errmsg;
#line 40 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	sqlite3_free ((void*) _tmp4_);
#line 41 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	result = ec;
#line 41 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	if (errmsg) {
#line 41 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		*errmsg = _vala_errmsg;
#line 306 "Database.c"
	} else {
#line 41 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
		_g_free0 (_vala_errmsg);
#line 310 "Database.c"
	}
#line 41 "/usr/share/vala-0.40/vapi/sqlite3.vapi"
	return result;
#line 314 "Database.c"
}


static gint
services_database_create_tables (ServicesDatabase* self)
{
	gint result = 0;
	gint rc = 0;
	const gchar* _tmp0_;
	sqlite3* _tmp1_ = NULL;
	gint _tmp2_;
	gint _tmp3_;
	sqlite3* _tmp8_;
	gint _tmp9_;
#line 26 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, 0);
#line 29 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp0_ = self->priv->db_path;
#line 29 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp2_ = sqlite3_open (_tmp0_, &_tmp1_);
#line 29 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_close0 (self->priv->db);
#line 29 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	self->priv->db = _tmp1_;
#line 29 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	rc = _tmp2_;
#line 31 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp3_ = rc;
#line 31 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	if (_tmp3_ != SQLITE_OK) {
#line 345 "Database.c"
		FILE* _tmp4_;
		gint _tmp5_;
		sqlite3* _tmp6_;
		const gchar* _tmp7_;
#line 32 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp4_ = stderr;
#line 32 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp5_ = rc;
#line 32 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp6_ = self->priv->db;
#line 32 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp7_ = sqlite3_errmsg (_tmp6_);
#line 32 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		fprintf (_tmp4_, "Can't open database: %d, %s\n", _tmp5_, _tmp7_);
#line 33 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		gtk_main_quit ();
#line 362 "Database.c"
	}
#line 36 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp8_ = self->priv->db;
#line 36 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp9_ = _sqlite3_exec (_tmp8_, "CREATE TABLE IF NOT EXISTS tracks (" "id             INTEGER PRIMARY KEY AUTOINCREMENT, " "path           VARCHAR," "title          VARCHAR," "artist         VARCHAR," "genre          VARCHAR," "duration       INTEGER," "album          VARCHAR)", NULL, NULL, NULL);
#line 36 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	rc = _tmp9_;
#line 44 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_debug ("Database.vala:44: Table trackS created");
#line 46 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	result = rc;
#line 46 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	return result;
#line 376 "Database.c"
}


gboolean
services_database_music_file_exists (ServicesDatabase* self,
                                     const gchar* uri)
{
	gboolean result = FALSE;
	gboolean file_exists = FALSE;
	sqlite3_stmt* stmt = NULL;
	gint res = 0;
	sqlite3* _tmp0_;
	sqlite3_stmt* _tmp1_ = NULL;
	gint _tmp2_;
	gint _tmp3_;
	sqlite3_stmt* _tmp4_;
	gchar* _tmp5_;
	GDestroyNotify _tmp6_;
	gint _tmp7_;
	sqlite3_stmt* _tmp8_;
#line 49 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 49 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_return_val_if_fail (uri != NULL, FALSE);
#line 50 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	file_exists = FALSE;
#line 53 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp0_ = self->priv->db;
#line 53 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp2_ = sqlite3_prepare_v2 (_tmp0_, "SELECT COUNT (*) FROM tracks WHERE path = ?", -1, &_tmp1_, NULL);
#line 53 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 53 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	stmt = _tmp1_;
#line 53 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = _tmp2_;
#line 54 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp3_ = res;
#line 54 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp3_ == SQLITE_OK, "res == Sqlite.OK");
#line 56 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp4_ = stmt;
#line 56 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp5_ = g_strdup (uri);
#line 56 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp6_ = g_free;
#line 56 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp4_, 1, _tmp5_, -1, _tmp6_);
#line 57 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp7_ = res;
#line 57 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp7_ == SQLITE_OK, "res == Sqlite.OK");
#line 59 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp8_ = stmt;
#line 59 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	if (sqlite3_step (_tmp8_) == SQLITE_ROW) {
#line 433 "Database.c"
		sqlite3_stmt* _tmp9_;
#line 60 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp9_ = stmt;
#line 60 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		file_exists = sqlite3_column_int (_tmp9_, 0) > 0;
#line 439 "Database.c"
	}
#line 63 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	result = file_exists;
#line 63 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 63 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	return result;
#line 447 "Database.c"
}


void
services_database_add_track (ServicesDatabase* self,
                             ObjectsTrack* track)
{
	sqlite3_stmt* stmt = NULL;
	gint res = 0;
	sqlite3* _tmp0_;
	sqlite3_stmt* _tmp1_ = NULL;
	gint _tmp2_;
	gint _tmp3_;
	sqlite3_stmt* _tmp4_;
	const gchar* _tmp5_;
	gchar* _tmp6_;
	GDestroyNotify _tmp7_;
	gint _tmp8_;
	sqlite3_stmt* _tmp9_;
	const gchar* _tmp10_;
	gchar* _tmp11_;
	GDestroyNotify _tmp12_;
	gint _tmp13_;
	sqlite3_stmt* _tmp14_;
	const gchar* _tmp15_;
	gchar* _tmp16_;
	GDestroyNotify _tmp17_;
	gint _tmp18_;
	sqlite3_stmt* _tmp19_;
	const gchar* _tmp20_;
	gchar* _tmp21_;
	GDestroyNotify _tmp22_;
	gint _tmp23_;
	sqlite3_stmt* _tmp24_;
	guint64 _tmp25_;
	gint _tmp26_;
	sqlite3_stmt* _tmp27_;
	const gchar* _tmp28_;
	gchar* _tmp29_;
	GDestroyNotify _tmp30_;
	gint _tmp31_;
	sqlite3_stmt* _tmp32_;
	gint _tmp33_;
#line 66 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_return_if_fail (self != NULL);
#line 66 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_return_if_fail (track != NULL);
#line 69 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp0_ = self->priv->db;
#line 69 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp2_ = sqlite3_prepare_v2 (_tmp0_, "INSERT INTO tracks (path," "title, artist, genre, duration, album)" "VALUES (?, ?, ?, ?, ?, ?)", -1, &_tmp1_, NULL);
#line 69 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 69 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	stmt = _tmp1_;
#line 69 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = _tmp2_;
#line 72 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp3_ = res;
#line 72 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp3_ == SQLITE_OK, "res == Sqlite.OK");
#line 74 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp4_ = stmt;
#line 74 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp5_ = track->path;
#line 74 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp6_ = g_strdup (_tmp5_);
#line 74 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp7_ = g_free;
#line 74 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp4_, 1, _tmp6_, -1, _tmp7_);
#line 75 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp8_ = res;
#line 75 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp8_ == SQLITE_OK, "res == Sqlite.OK");
#line 77 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp9_ = stmt;
#line 77 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp10_ = track->title;
#line 77 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp11_ = g_strdup (_tmp10_);
#line 77 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp12_ = g_free;
#line 77 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp9_, 2, _tmp11_, -1, _tmp12_);
#line 78 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp13_ = res;
#line 78 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp13_ == SQLITE_OK, "res == Sqlite.OK");
#line 80 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp14_ = stmt;
#line 80 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp15_ = track->artist;
#line 80 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp16_ = g_strdup (_tmp15_);
#line 80 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp17_ = g_free;
#line 80 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp14_, 3, _tmp16_, -1, _tmp17_);
#line 81 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp18_ = res;
#line 81 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp18_ == SQLITE_OK, "res == Sqlite.OK");
#line 83 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp19_ = stmt;
#line 83 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp20_ = track->genre;
#line 83 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp21_ = g_strdup (_tmp20_);
#line 83 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp22_ = g_free;
#line 83 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp19_, 4, _tmp21_, -1, _tmp22_);
#line 84 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp23_ = res;
#line 84 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp23_ == SQLITE_OK, "res == Sqlite.OK");
#line 86 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp24_ = stmt;
#line 86 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp25_ = track->duration;
#line 86 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_int64 (_tmp24_, 5, (gint64) _tmp25_);
#line 87 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp26_ = res;
#line 87 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp26_ == SQLITE_OK, "res == Sqlite.OK");
#line 89 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp27_ = stmt;
#line 89 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp28_ = track->album;
#line 89 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp29_ = g_strdup (_tmp28_);
#line 89 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp30_ = g_free;
#line 89 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_bind_text (_tmp27_, 6, _tmp29_, -1, _tmp30_);
#line 90 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp31_ = res;
#line 90 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp31_ == SQLITE_OK, "res == Sqlite.OK");
#line 92 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp32_ = stmt;
#line 92 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = sqlite3_step (_tmp32_);
#line 94 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp33_ = res;
#line 94 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	if (_tmp33_ == SQLITE_DONE) {
#line 597 "Database.c"
	}
#line 66 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 601 "Database.c"
}


GeeArrayList*
services_database_get_all_tracks (ServicesDatabase* self)
{
	GeeArrayList* result = NULL;
	sqlite3_stmt* stmt = NULL;
	gint res = 0;
	sqlite3* _tmp0_;
	sqlite3_stmt* _tmp1_ = NULL;
	gint _tmp2_;
	gint _tmp3_;
	GeeArrayList* all = NULL;
	GeeArrayList* _tmp4_;
#line 99 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 102 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp0_ = self->priv->db;
#line 102 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp2_ = sqlite3_prepare_v2 (_tmp0_, "SELECT * FROM tracks", -1, &_tmp1_, NULL);
#line 102 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 102 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	stmt = _tmp1_;
#line 102 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	res = _tmp2_;
#line 104 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp3_ = res;
#line 104 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_vala_assert (_tmp3_ == SQLITE_OK, "res == Sqlite.OK");
#line 106 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_tmp4_ = gee_array_list_new (OBJECTS_TYPE_TRACK, (GBoxedCopyFunc) objects_track_ref, (GDestroyNotify) objects_track_unref, NULL, NULL, NULL);
#line 106 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	all = _tmp4_;
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	while (TRUE) {
#line 639 "Database.c"
		sqlite3_stmt* _tmp5_;
		gint _tmp6_;
		ObjectsTrack* track = NULL;
		ObjectsTrack* _tmp7_;
		ObjectsTrack* _tmp8_;
		sqlite3_stmt* _tmp9_;
		ObjectsTrack* _tmp10_;
		sqlite3_stmt* _tmp11_;
		const gchar* _tmp12_;
		gchar* _tmp13_;
		ObjectsTrack* _tmp14_;
		sqlite3_stmt* _tmp15_;
		const gchar* _tmp16_;
		gchar* _tmp17_;
		ObjectsTrack* _tmp18_;
		sqlite3_stmt* _tmp19_;
		const gchar* _tmp20_;
		gchar* _tmp21_;
		ObjectsTrack* _tmp22_;
		sqlite3_stmt* _tmp23_;
		const gchar* _tmp24_;
		gchar* _tmp25_;
		ObjectsTrack* _tmp26_;
		sqlite3_stmt* _tmp27_;
		ObjectsTrack* _tmp28_;
		sqlite3_stmt* _tmp29_;
		const gchar* _tmp30_;
		gchar* _tmp31_;
		GeeArrayList* _tmp32_;
		ObjectsTrack* _tmp33_;
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp5_ = stmt;
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		res = sqlite3_step (_tmp5_);
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp6_ = res;
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		if (!(_tmp6_ == SQLITE_ROW)) {
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
			break;
#line 680 "Database.c"
		}
#line 109 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp7_ = objects_track_new (0, "", "", "", "", "", (guint64) 0);
#line 109 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		track = _tmp7_;
#line 111 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp8_ = track;
#line 111 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp9_ = stmt;
#line 111 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp8_->id = sqlite3_column_int (_tmp9_, 0);
#line 112 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp10_ = track;
#line 112 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp11_ = stmt;
#line 112 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp12_ = sqlite3_column_text (_tmp11_, 1);
#line 112 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp13_ = g_strdup (_tmp12_);
#line 112 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_g_free0 (_tmp10_->path);
#line 112 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp10_->path = _tmp13_;
#line 113 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp14_ = track;
#line 113 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp15_ = stmt;
#line 113 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp16_ = sqlite3_column_text (_tmp15_, 2);
#line 113 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp17_ = g_strdup (_tmp16_);
#line 113 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_g_free0 (_tmp14_->title);
#line 113 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp14_->title = _tmp17_;
#line 114 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp18_ = track;
#line 114 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp19_ = stmt;
#line 114 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp20_ = sqlite3_column_text (_tmp19_, 3);
#line 114 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp21_ = g_strdup (_tmp20_);
#line 114 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_g_free0 (_tmp18_->artist);
#line 114 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp18_->artist = _tmp21_;
#line 115 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp22_ = track;
#line 115 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp23_ = stmt;
#line 115 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp24_ = sqlite3_column_text (_tmp23_, 4);
#line 115 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp25_ = g_strdup (_tmp24_);
#line 115 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_g_free0 (_tmp22_->genre);
#line 115 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp22_->genre = _tmp25_;
#line 116 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp26_ = track;
#line 116 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp27_ = stmt;
#line 116 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp26_->duration = (guint64) sqlite3_column_int (_tmp27_, 5);
#line 117 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp28_ = track;
#line 117 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp29_ = stmt;
#line 117 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp30_ = sqlite3_column_text (_tmp29_, 6);
#line 117 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp31_ = g_strdup (_tmp30_);
#line 117 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_g_free0 (_tmp28_->album);
#line 117 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp28_->album = _tmp31_;
#line 119 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp32_ = all;
#line 119 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_tmp33_ = track;
#line 119 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		gee_abstract_collection_add ((GeeAbstractCollection*) _tmp32_, _tmp33_);
#line 108 "/home/alain/Proyectos/byte/src/Services/Database.vala"
		_objects_track_unref0 (track);
#line 766 "Database.c"
	}
#line 122 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	result = all;
#line 122 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_finalize0 (stmt);
#line 122 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	return result;
#line 774 "Database.c"
}


static void
services_database_class_init (ServicesDatabaseClass * klass)
{
#line 1 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	services_database_parent_class = g_type_class_peek_parent (klass);
#line 1 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	g_type_class_add_private (klass, sizeof (ServicesDatabasePrivate));
#line 1 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	G_OBJECT_CLASS (klass)->finalize = services_database_finalize;
#line 787 "Database.c"
}


static void
services_database_instance_init (ServicesDatabase * self)
{
#line 1 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	self->priv = SERVICES_DATABASE_GET_PRIVATE (self);
#line 796 "Database.c"
}


static void
services_database_finalize (GObject * obj)
{
	ServicesDatabase * self;
#line 1 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SERVICES_TYPE_DATABASE, ServicesDatabase);
#line 2 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_sqlite3_close0 (self->priv->db);
#line 3 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	_g_free0 (self->priv->db_path);
#line 1 "/home/alain/Proyectos/byte/src/Services/Database.vala"
	G_OBJECT_CLASS (services_database_parent_class)->finalize (obj);
#line 812 "Database.c"
}


GType
services_database_get_type (void)
{
	static volatile gsize services_database_type_id__volatile = 0;
	if (g_once_init_enter (&services_database_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (ServicesDatabaseClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) services_database_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (ServicesDatabase), 0, (GInstanceInitFunc) services_database_instance_init, NULL };
		GType services_database_type_id;
		services_database_type_id = g_type_register_static (G_TYPE_OBJECT, "ServicesDatabase", &g_define_type_info, 0);
		g_once_init_leave (&services_database_type_id__volatile, services_database_type_id);
	}
	return services_database_type_id__volatile;
}



