/* Utils.c generated by valac 0.40.12, the Vala compiler
 * generated from Utils.vala, do not modify */



#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <glib/gstdio.h>


#define TYPE_UTILS (utils_get_type ())
#define UTILS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_UTILS, Utils))
#define UTILS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_UTILS, UtilsClass))
#define IS_UTILS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_UTILS))
#define IS_UTILS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_UTILS))
#define UTILS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_UTILS, UtilsClass))

typedef struct _Utils Utils;
typedef struct _UtilsClass UtilsClass;
typedef struct _UtilsPrivate UtilsPrivate;
enum  {
	UTILS_0_PROPERTY,
	UTILS_NUM_PROPERTIES
};
static GParamSpec* utils_properties[UTILS_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define TYPE_STREAM_TIME_INFO (stream_time_info_get_type ())
typedef struct _StreamTimeInfo StreamTimeInfo;

#define SERVICES_TYPE_STREAM_PLAYER (services_stream_player_get_type ())
#define SERVICES_STREAM_PLAYER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SERVICES_TYPE_STREAM_PLAYER, ServicesStreamPlayer))
#define SERVICES_STREAM_PLAYER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SERVICES_TYPE_STREAM_PLAYER, ServicesStreamPlayerClass))
#define SERVICES_IS_STREAM_PLAYER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SERVICES_TYPE_STREAM_PLAYER))
#define SERVICES_IS_STREAM_PLAYER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SERVICES_TYPE_STREAM_PLAYER))
#define SERVICES_STREAM_PLAYER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SERVICES_TYPE_STREAM_PLAYER, ServicesStreamPlayerClass))

typedef struct _ServicesStreamPlayer ServicesStreamPlayer;
typedef struct _ServicesStreamPlayerClass ServicesStreamPlayerClass;

#define TYPE_STREAM_METADATA (stream_metadata_get_type ())
typedef struct _StreamMetadata StreamMetadata;

struct _Utils {
	GObject parent_instance;
	UtilsPrivate * priv;
};

struct _UtilsClass {
	GObjectClass parent_class;
};

struct _StreamTimeInfo {
	gulong nanoseconds;
	gchar* minutes;
};

struct _StreamMetadata {
	gchar* title;
	gchar* album;
	gchar* artist;
};


static gpointer utils_parent_class = NULL;
extern ServicesStreamPlayer* application_stream_player;

GType utils_get_type (void) G_GNUC_CONST;
void utils_create_dir_with_parents (Utils* self,
                                    const gchar* dir);
static gchar* utils_get_ns_to_min_string (Utils* self,
                                   gulong nanoseconds);
GType stream_time_info_get_type (void) G_GNUC_CONST;
StreamTimeInfo* stream_time_info_dup (const StreamTimeInfo* self);
void stream_time_info_free (StreamTimeInfo* self);
void stream_time_info_copy (const StreamTimeInfo* self,
                            StreamTimeInfo* dest);
void stream_time_info_destroy (StreamTimeInfo* self);
void utils_get_position_str (Utils* self,
                             StreamTimeInfo* result);
GType services_stream_player_get_type (void) G_GNUC_CONST;
gulong services_stream_player_get_position (ServicesStreamPlayer* self);
void utils_get_duration_str (Utils* self,
                             StreamTimeInfo* result);
gulong services_stream_player_get_duration (ServicesStreamPlayer* self);
Utils* utils_new (void);
Utils* utils_construct (GType object_type);
GType stream_metadata_get_type (void) G_GNUC_CONST;
StreamMetadata* stream_metadata_dup (const StreamMetadata* self);
void stream_metadata_free (StreamMetadata* self);
void stream_metadata_copy (const StreamMetadata* self,
                           StreamMetadata* dest);
void stream_metadata_destroy (StreamMetadata* self);


void
utils_create_dir_with_parents (Utils* self,
                               const gchar* dir)
{
	gchar* path = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	GFile* tmp = NULL;
	const gchar* _tmp2_;
	GFile* _tmp3_;
	GFile* _tmp4_;
#line 2 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_return_if_fail (self != NULL);
#line 2 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_return_if_fail (dir != NULL);
#line 3 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp0_ = g_get_home_dir ();
#line 3 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp1_ = g_strconcat (_tmp0_, dir, NULL);
#line 3 "/home/alain/Proyectos/byte/src/Utils.vala"
	path = _tmp1_;
#line 4 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_ = path;
#line 4 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp3_ = g_file_new_for_path (_tmp2_);
#line 4 "/home/alain/Proyectos/byte/src/Utils.vala"
	tmp = _tmp3_;
#line 5 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp4_ = tmp;
#line 5 "/home/alain/Proyectos/byte/src/Utils.vala"
	if (g_file_query_file_type (_tmp4_, 0, NULL) != G_FILE_TYPE_DIRECTORY) {
#line 132 "Utils.c"
		const gchar* _tmp5_;
#line 6 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp5_ = path;
#line 6 "/home/alain/Proyectos/byte/src/Utils.vala"
		g_mkdir_with_parents (_tmp5_, 0775);
#line 138 "Utils.c"
	}
#line 2 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_object_unref0 (tmp);
#line 2 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (path);
#line 144 "Utils.c"
}


static gchar*
utils_get_ns_to_min_string (Utils* self,
                            gulong nanoseconds)
{
	gchar* result = NULL;
	gint total_seconds = 0;
	gint minutes = 0;
	gint _tmp0_;
	gint seconds = 0;
	gint _tmp1_;
	gchar* _tmp2_ = NULL;
	gint _tmp3_;
	gchar* smin = NULL;
	gchar* _tmp10_;
	gchar* _tmp11_ = NULL;
	gint _tmp12_;
	gchar* ssec = NULL;
	gchar* _tmp19_;
	const gchar* _tmp20_;
	gchar* _tmp21_;
	gchar* _tmp22_;
	gchar* _tmp23_;
	gchar* _tmp24_;
#line 10 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_return_val_if_fail (self != NULL, NULL);
#line 12 "/home/alain/Proyectos/byte/src/Utils.vala"
	total_seconds = (gint) (nanoseconds / 1000000000);
#line 13 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp0_ = total_seconds;
#line 13 "/home/alain/Proyectos/byte/src/Utils.vala"
	minutes = _tmp0_ / 60;
#line 14 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp1_ = total_seconds;
#line 14 "/home/alain/Proyectos/byte/src/Utils.vala"
	seconds = _tmp1_ % 60;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp3_ = minutes;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
	if (_tmp3_ < 10) {
#line 187 "Utils.c"
		gint _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp4_ = minutes;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp5_ = g_strdup_printf ("%i", _tmp4_);
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp6_ = _tmp5_;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp7_ = g_strconcat ("0", _tmp6_, NULL);
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_g_free0 (_tmp2_);
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp2_ = _tmp7_;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_g_free0 (_tmp6_);
#line 206 "Utils.c"
	} else {
		gint _tmp8_;
		gchar* _tmp9_;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp8_ = minutes;
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp9_ = g_strdup_printf ("%i", _tmp8_);
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_g_free0 (_tmp2_);
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp2_ = _tmp9_;
#line 218 "Utils.c"
	}
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp10_ = g_strdup (_tmp2_);
#line 15 "/home/alain/Proyectos/byte/src/Utils.vala"
	smin = _tmp10_;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp12_ = seconds;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
	if (_tmp12_ < 10) {
#line 228 "Utils.c"
		gint _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		gchar* _tmp16_;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp13_ = seconds;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp14_ = g_strdup_printf ("%i", _tmp13_);
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp15_ = _tmp14_;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp16_ = g_strconcat ("0", _tmp15_, NULL);
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_g_free0 (_tmp11_);
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp11_ = _tmp16_;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_g_free0 (_tmp15_);
#line 247 "Utils.c"
	} else {
		gint _tmp17_;
		gchar* _tmp18_;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp17_ = seconds;
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp18_ = g_strdup_printf ("%i", _tmp17_);
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_g_free0 (_tmp11_);
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
		_tmp11_ = _tmp18_;
#line 259 "Utils.c"
	}
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp19_ = g_strdup (_tmp11_);
#line 16 "/home/alain/Proyectos/byte/src/Utils.vala"
	ssec = _tmp19_;
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp20_ = smin;
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp21_ = g_strconcat (_tmp20_, ":", NULL);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp22_ = _tmp21_;
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp23_ = g_strconcat (_tmp22_, ssec, NULL);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp24_ = _tmp23_;
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (_tmp22_);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	result = _tmp24_;
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (ssec);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (_tmp11_);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (smin);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (_tmp2_);
#line 18 "/home/alain/Proyectos/byte/src/Utils.vala"
	return result;
#line 289 "Utils.c"
}


void
utils_get_position_str (Utils* self,
                        StreamTimeInfo* result)
{
	gulong pos = 0UL;
	ServicesStreamPlayer* _tmp0_;
	gchar* _tmp1_;
	StreamTimeInfo _tmp2_ = {0};
#line 21 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_return_if_fail (self != NULL);
#line 23 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp0_ = application_stream_player;
#line 23 "/home/alain/Proyectos/byte/src/Utils.vala"
	pos = services_stream_player_get_position (_tmp0_);
#line 24 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp1_ = utils_get_ns_to_min_string (self, pos);
#line 24 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_.nanoseconds = pos;
#line 24 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (_tmp2_.minutes);
#line 24 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_.minutes = _tmp1_;
#line 24 "/home/alain/Proyectos/byte/src/Utils.vala"
	*result = _tmp2_;
#line 24 "/home/alain/Proyectos/byte/src/Utils.vala"
	return;
#line 319 "Utils.c"
}


void
utils_get_duration_str (Utils* self,
                        StreamTimeInfo* result)
{
	gulong dur = 0UL;
	ServicesStreamPlayer* _tmp0_;
	gchar* _tmp1_;
	StreamTimeInfo _tmp2_ = {0};
#line 27 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_return_if_fail (self != NULL);
#line 29 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp0_ = application_stream_player;
#line 29 "/home/alain/Proyectos/byte/src/Utils.vala"
	dur = services_stream_player_get_duration (_tmp0_);
#line 30 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp1_ = utils_get_ns_to_min_string (self, dur);
#line 30 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_.nanoseconds = dur;
#line 30 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 (_tmp2_.minutes);
#line 30 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_.minutes = _tmp1_;
#line 30 "/home/alain/Proyectos/byte/src/Utils.vala"
	*result = _tmp2_;
#line 30 "/home/alain/Proyectos/byte/src/Utils.vala"
	return;
#line 349 "Utils.c"
}


Utils*
utils_construct (GType object_type)
{
	Utils * self = NULL;
#line 1 "/home/alain/Proyectos/byte/src/Utils.vala"
	self = (Utils*) g_object_new (object_type, NULL);
#line 1 "/home/alain/Proyectos/byte/src/Utils.vala"
	return self;
#line 361 "Utils.c"
}


Utils*
utils_new (void)
{
#line 1 "/home/alain/Proyectos/byte/src/Utils.vala"
	return utils_construct (TYPE_UTILS);
#line 370 "Utils.c"
}


static void
utils_class_init (UtilsClass * klass)
{
#line 1 "/home/alain/Proyectos/byte/src/Utils.vala"
	utils_parent_class = g_type_class_peek_parent (klass);
#line 379 "Utils.c"
}


static void
utils_instance_init (Utils * self)
{
}


GType
utils_get_type (void)
{
	static volatile gsize utils_type_id__volatile = 0;
	if (g_once_init_enter (&utils_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (UtilsClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) utils_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (Utils), 0, (GInstanceInitFunc) utils_instance_init, NULL };
		GType utils_type_id;
		utils_type_id = g_type_register_static (G_TYPE_OBJECT, "Utils", &g_define_type_info, 0);
		g_once_init_leave (&utils_type_id__volatile, utils_type_id);
	}
	return utils_type_id__volatile;
}


void
stream_metadata_copy (const StreamMetadata* self,
                      StreamMetadata* dest)
{
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp0_ = (*self).title;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*dest).title);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	(*dest).title = _tmp1_;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_ = (*self).album;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*dest).album);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	(*dest).album = _tmp3_;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp4_ = (*self).artist;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp5_ = g_strdup (_tmp4_);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*dest).artist);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	(*dest).artist = _tmp5_;
#line 437 "Utils.c"
}


void
stream_metadata_destroy (StreamMetadata* self)
{
#line 35 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*self).title);
#line 36 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*self).album);
#line 37 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*self).artist);
#line 450 "Utils.c"
}


StreamMetadata*
stream_metadata_dup (const StreamMetadata* self)
{
	StreamMetadata* dup;
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	dup = g_new0 (StreamMetadata, 1);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	stream_metadata_copy (self, dup);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	return dup;
#line 464 "Utils.c"
}


void
stream_metadata_free (StreamMetadata* self)
{
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	stream_metadata_destroy (self);
#line 34 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_free (self);
#line 475 "Utils.c"
}


GType
stream_metadata_get_type (void)
{
	static volatile gsize stream_metadata_type_id__volatile = 0;
	if (g_once_init_enter (&stream_metadata_type_id__volatile)) {
		GType stream_metadata_type_id;
		stream_metadata_type_id = g_boxed_type_register_static ("StreamMetadata", (GBoxedCopyFunc) stream_metadata_dup, (GBoxedFreeFunc) stream_metadata_free);
		g_once_init_leave (&stream_metadata_type_id__volatile, stream_metadata_type_id);
	}
	return stream_metadata_type_id__volatile;
}


void
stream_time_info_copy (const StreamTimeInfo* self,
                       StreamTimeInfo* dest)
{
	gulong _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp0_ = (*self).nanoseconds;
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	(*dest).nanoseconds = _tmp0_;
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp1_ = (*self).minutes;
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	_tmp2_ = g_strdup (_tmp1_);
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*dest).minutes);
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	(*dest).minutes = _tmp2_;
#line 511 "Utils.c"
}


void
stream_time_info_destroy (StreamTimeInfo* self)
{
#line 42 "/home/alain/Proyectos/byte/src/Utils.vala"
	_g_free0 ((*self).minutes);
#line 520 "Utils.c"
}


StreamTimeInfo*
stream_time_info_dup (const StreamTimeInfo* self)
{
	StreamTimeInfo* dup;
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	dup = g_new0 (StreamTimeInfo, 1);
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	stream_time_info_copy (self, dup);
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	return dup;
#line 534 "Utils.c"
}


void
stream_time_info_free (StreamTimeInfo* self)
{
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	stream_time_info_destroy (self);
#line 40 "/home/alain/Proyectos/byte/src/Utils.vala"
	g_free (self);
#line 545 "Utils.c"
}


GType
stream_time_info_get_type (void)
{
	static volatile gsize stream_time_info_type_id__volatile = 0;
	if (g_once_init_enter (&stream_time_info_type_id__volatile)) {
		GType stream_time_info_type_id;
		stream_time_info_type_id = g_boxed_type_register_static ("StreamTimeInfo", (GBoxedCopyFunc) stream_time_info_dup, (GBoxedFreeFunc) stream_time_info_free);
		g_once_init_leave (&stream_time_info_type_id__volatile, stream_time_info_type_id);
	}
	return stream_time_info_type_id__volatile;
}



